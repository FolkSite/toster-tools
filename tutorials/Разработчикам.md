### <a name="подготовка-к-работе"></a>Подготовка к работе



```bash
$ git clone git@github.com:yarkovaleksei/{{EXT_REPO}}.git
$ cd {{EXT_REPO}}
$ npm install
```

В проекте используется система сборки Gulp,
по этому вместо npm run можно напрямую обращаться к сборщику gulp,
вызывая его в терминале/коммандной строке, из корня папки проекта.

- - -
### <a name="проверка-кода"></a>Проверка кода

Проверка исходного кода Babel-JS в папке **./src/_js/**

```bash
$ gulp eslint
```

- - -
### <a name="сборка"></a>Сборка

Производится компиляция LESS в CSS, Babel-JS в JS, копирование дополнительных файлов
в папку **temp**.
Которую так же можно использовать для загрузки распакованного расширения,
с последующей отладкой в браузере.

```bash
$ gulp compile
```

- - -
### <a name="упаковка-в-zip-перед-публикацией"></a>Упаковка в zip перед публикацией

Пакует содержимое **./temp/** в архив, и помещает его в папку 
**./build/**.

```bash
$ gulp zip
```

!!! Перед вызовом этой команды вызывайте 
```bash
$ gulp compile
```

- - -
### <a name="подписывание-расширения-для-Firefox"></a>Подписывание расширения для Firefox

Чтобы иметь возможность подписать файл для Firefox надо пройти по [этой ссылке](https://addons.mozilla.org/en-US/developers/addon/api/key/), 
и сохранить ваши ключи в секцию **FFSign** файла **vars.json** в папке репозитория.
После чего переключить **FFSign.use** в **True**, дабы команда создания релиза подхватила вызов 
создания расширения для FireFox.

Где **USERID** это **"JWT issuer"**, а **SECRETKEY** это
**"JWT secret"**.

Секция **FFSign** должна выглядеть так:

```json
"FFSign":{
    "use":true,
    "USERID":"user:123456789:999",
    "SECRETKEY":"e1373f71d00aad90183b410c2e8661265a71845fd0805bd2bdca5fe66a635cfb"
}
```

Команда для создания и подписи расширения для FireFox:

```bash
$ gulp ffsign
```

- - -
### <a name="сборка-релиза"></a>Сборка релиза

Производится компиляция LESS в CSS, Babel-JS в JS, копирование дополнительных файлов,
упаковка расширения в ZIP архив, подпись расширения для FF,
перемещение его в папку **build**, генерация документации.


```bash
$ gulp release
```

- - -
### <a name="сгенерировать-документацию"></a>Сгенерировать документацию

```bash
$ gulp jsdoc
```
Документация будет сгенерирована в папку **docs** в корне проекта.
